<!DOCTYPE html>
<head>
  <script src="bower_components/webcomponentsjs/webcomponents-lite.js"></script>
  <link rel="import" href="bower_components/app-layout/app-layout.html">
  <link rel="import" href="bower_components/iron-icons/iron-icons.html">
  <link rel="import" href="bower_components/paper-input/paper-input.html">
  <link rel="import" href="bower_components/paper-icon-button/paper-icon-button.html">
  <link rel="import" href="resources/style.html">
  <script>
    function $(id) {
      return document.getElementById(id);
    }
    window.addEventListener("load", function() {
      $("name").focus();
      var sections = document.getElementsByClassName("section");
      for (var i = 0; i < sections.length; ++i) {
        var section = sections[i];
        // TODO: This doesn't handle mobile taps.
        section.addEventListener("click", function(e) { updateTab(e.target); });
      }
      updateTabByNumber(0);
    });

    var selectedTabNum = null;
    var tabMap = { "propertyInfo": 0,
                   "propertyPrices": 1,
                   "financing": 2,
                   // If you add more numbers, make sure to update updateTabByNumber.
    };

    function updateTab(elem) {
      updateTabByNumber(tabMap[elem.id]);
    }

    function updateTabByNumber(num) {
      if (selectedTabNum === num)
        return;

      /*if (num == 0) {
        previous.setAttribute("disabled", true);
        next.removeAttribute("disabled");
      } else if (num == 2) {
        previous.removeAttribute("disabled");
        next.setAttribute("disabled", true);
      } else {
        previous.removeAttribute("disabled");
        next.removeAttribute("disabled");
      }*/
      for (tab in tabMap) {
        if (tabMap[tab] == num) {
          $(tab).setAttribute("icon", "radio-button-checked");
        } else {
          $(tab).setAttribute("icon", "radio-button-unchecked");
        }
      }
      selectedTabNum = num;
    }
 </script>
  <style>
    .propertyInfo, .propertyPrices, .financing, .expenses {
      width: 50ex;
    }
    #zip {
      width: 5em;
      margin-bottom: 50px;
    }
    .sections {
      text-align: center;
      pointer-events: auto;
    }
  </style>
  <title>Property estimator</title>
</head>
<app-toolbar>
  <div main-title id="title" style="text-align: center">Property information</div>
</app-toolbar>
TODO: Plug & disable buttons and update title.
<div class="propertyInfo">
  <paper-input always-float-label label="Name" id="name"></paper-input>
  <paper-input always-float-label label="Address" id="address"></paper-input>
  TODO: Can't use type="number" and maxlength!
  <paper-input always-float-label label="Zip" id="zip" auto-validate pattern="[0-9]*" error-message="numbers only" maxlength=5 char-counter></paper-input>
</div>

<div class="propertyPrices">
  <paper-input always-float-label label="Offer price" id="offer" type="number"></paper-input>
  TODO: Separate improvements from rehab?
  <paper-input always-float-label label="Improvements" id="rentals" type="number"></paper-input>
  TODO: Add one rental at a time.
  <paper-input always-float-label label="Rentals" id="rentals" type="number"></paper-input>
  <paper-input always-float-label label="Closing costs" id="closing" type="number"></paper-input>
</div>

<div class="financing">
  TODO: Validate 0-100
  <paper-input always-float-label label="Downpayment" id="downpayment" type="number"></paper-input>
  <paper-input always-float-label label="Rate" id="rate" type="number"></paper-input>
</div>

<div class="expenses">
  <paper-input always-float-label label="Rate" id="rate" type="number"></paper-input>
</div>

<div class="sections">
  <paper-icon-button icon="radio-button-checked" id="propertyInfo" class="section"></paper-icon-button>
  <paper-icon-button icon="radio-button-unchecked" id="propertyPrices" class="section"></paper-icon-button>
  <paper-icon-button icon="radio-button-unchecked" id="financing" class="section"></paper-icon-button>
  <paper-icon-button icon="radio-button-unchecked" id="expenses" class="section"></paper-icon-button>
</div>
TODO: Finish this bar!
